(this.webpackJsonptomatodo=this.webpackJsonptomatodo||[]).push([[0],{129:function(e,t,n){e.exports=n(230)},134:function(e,t,n){},163:function(e,t,n){},214:function(e,t,n){},217:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),c=n.n(o),s=(n(134),n(40)),i=n(15),u=n(16),l=n(18),p=n(17),d=n(19),m=n(41),h=(n(140),n(126)),f=n(12),v=n.n(f),b=n(23),g=(n(231),n(70)),O=(n(56),n(4)),E=n(21),j="";j="/tomatodo";var y=Object(E.a)({basename:j}),w=n(119),T=n.n(w).a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"b7u5og7z2mpu6LzWniQnYnR9","t-app-secret":"mrbx74x6kvDBHqMsZLskRac1"}});T.interceptors.request.use((function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return console.error(e),Promise.reject(e)})),T.interceptors.response.use((function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e}),(function(e){return 401===e.response.status&&y.push("login"),Promise.reject(e)}));var k=T,x=(n(163),n(55)),C=(n(75),n(34)),D=function(e){return{type:"UPDATE_TODO",payload:e}},I=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).addTodo=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post("todos",{description:n.state.description});case 3:t=e.sent,n.props.addTodo(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:n.setState({description:""});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.state={description:""},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.description,n=t?r.a.createElement(O.a,{type:"enter",onClick:this.addTodo}):r.a.createElement("span",null);return r.a.createElement("div",{id:"TodoInput"},r.a.createElement(C.a,{placeholder:"\u6dfb\u52a0\u5f85\u529e\u4e8b\u9879 . . .",suffix:n,value:t,onPressEnter:this.addTodo,onChange:function(t){return e.setState({description:t.target.value})}}))}}]),t}(a.Component),S={addTodo:function(e){return{type:"ADD_TODO",payload:e}}},P=Object(s.b)((function(e,t){return Object(x.a)({},t)}),S)(I),N=(n(214),n(215),n(127)),U=(n(217),n(2)),_=n.n(U),A=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).updateTodo=function(){var e=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.put("todos/".concat(n.props.id),t);case 3:a=e.sent,n.props.updateTodo(a.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.editTodo=function(){n.props.editTodo(n.props.id)},n.onKeyUp=function(e){13===e.keyCode&&""!==n.state.editText&&n.updateTodo({description:n.state.editText})},n.state={editText:n.props.description},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"editing"},r.a.createElement("input",{type:"text",value:this.state.editText,onChange:function(t){return e.setState({editText:t.target.value})},onKeyUp:this.onKeyUp}),r.a.createElement("div",{className:"iconWrapper"},r.a.createElement(O.a,{type:"enter"}),r.a.createElement(O.a,{type:"delete",onClick:function(t){return e.updateTodo({deleted:!0})}}))),n=r.a.createElement("span",{className:"text",onDoubleClick:this.editTodo},this.props.description),a=_()({TodoItem:!0,editing:this.props.editing,completed:this.props.completed});return r.a.createElement("div",{id:"TodoItem",className:a},r.a.createElement(N.a,{style:{marginRight:8},checked:this.props.completed,onChange:function(t){return e.updateTodo({completed:t.target.checked})}}),this.props.editing?t:n)}}]),t}(a.Component),L={editTodo:function(e){return{type:"EDIT_TODO",payload:e}},updateTodo:D},B=Object(s.b)((function(e,t){return Object(x.a)({},t)}),L)(A),M=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).getTodos=Object(b.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("todos");case 3:t=e.sent,a=t.data.resources.map((function(e){return Object.assign({},e,{editing:!1})})),n.props.initTodos(a),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getTodos()}},{key:"render",value:function(){return r.a.createElement("div",{id:"Todos"},r.a.createElement(P,null),r.a.createElement("div",{className:"todoList"},this.unCompletedTodos.map((function(e){return r.a.createElement(B,Object.assign({key:e.id},e))})),this.completedTodos.map((function(e){return r.a.createElement(B,Object.assign({key:e.id},e))}))))}},{key:"unDeletedTodos",get:function(){return this.props.todos.filter((function(e){return!e.deleted}))}},{key:"unCompletedTodos",get:function(){return this.unDeletedTodos.filter((function(e){return!e.completed}))}},{key:"completedTodos",get:function(){return this.unDeletedTodos.filter((function(e){return e.completed}))}}]),t}(a.Component),R={initTodos:function(e){return{type:"INIT_TODOS",payload:e}},updateTodo:D},W=Object(s.b)((function(e,t){return Object(x.a)({todos:e.todos},t)}),R)(M),z=r.a.createElement(g.a,null,r.a.createElement(g.a.Item,{key:"1"},r.a.createElement(O.a,{type:"user"}),"\u4e2a\u4eba\u8bbe\u7f6e"),r.a.createElement(g.a.Item,{key:"2",onClick:function(){localStorage.setItem("x-token",""),y.push("/login")}},r.a.createElement(O.a,{type:"logout"}),"\u6ce8\u9500")),K=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).getMe=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("me");case 3:t=e.sent,n.setState({user:t.data}),console.log(t),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),n.state={user:""},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMe();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"Index",id:"Index"},r.a.createElement("header",null,r.a.createElement("span",{className:"logo"},"TomatoDo \u2014 \u5728\u7ebf\u5f85\u529e\u4e8b\u9879\u5de5\u5177"),r.a.createElement(h.a,{overlay:z},r.a.createElement("span",null,this.state.user&&this.state.user.account,r.a.createElement(O.a,{type:"down",style:{marginLeft:8}})))),r.a.createElement("main",null,r.a.createElement(W,null)))}}]),t}(a.Component),q=Object(m.f)(K),J=(n(62),n(29)),H=n(52),Q=(n(228),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).onChangeAccount=function(e){n.setState({account:e.target.value})},n.onChangePassword=function(e){n.setState({password:e.target.value})},n.submit=Object(b.a)(v.a.mark((function e(){var t,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.account,r=t.password,e.prev=1,e.next=4,k.post("sign_in/user",{account:a,password:r});case 4:n.props.history.push("/"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),n.state={account:"",password:""},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.account,n=e.password;return r.a.createElement("div",{className:"Login",id:"Login"},r.a.createElement("h2",null,"\u756a\u8304\u95f9\u949f - \u767b\u5f55"),r.a.createElement(C.a,{placeholder:"\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d",value:t,prefix:r.a.createElement(O.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:this.onChangeAccount}),r.a.createElement(C.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:n,onChange:this.onChangePassword}),r.a.createElement(J.a,{type:"primary",className:"loginBtn",onClick:this.submit}," \u767b\u5f55"),r.a.createElement("p",null,"\u5982\u679c\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7\u7acb\u5373",r.a.createElement(H.a,{to:"/signUp"},"\u6ce8\u518c")))}}]),t}(r.a.Component)),Y=Object(m.f)(Q),Z=(n(229),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).onChangeAccount=function(e){n.setState({account:e.target.value})},n.onChangePassword=function(e){n.setState({password:e.target.value})},n.onChangePasswordConformation=function(e){n.setState({passwordConformation:e.target.value})},n.submit=Object(b.a)(v.a.mark((function e(){var t,a,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.account,r=t.password,o=t.passwordConformation,e.prev=1,e.next=4,k.post("sign_up/user",{account:a,password:r,password_confirmation:o});case 4:n.props.history.push("/"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),n.state={account:"",password:"",passwordConformation:""},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.account,n=e.password,a=e.passwordConformation;return r.a.createElement("div",{className:"SignUp",id:"SignUp"},r.a.createElement("h2",null,"\u756a\u8304\u95f9\u949f - \u6ce8\u518c"),r.a.createElement(C.a,{placeholder:"\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d",value:t,prefix:r.a.createElement(O.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:this.onChangeAccount}),r.a.createElement(C.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:n,onChange:this.onChangePassword}),r.a.createElement(C.a.Password,{placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",value:a,onChange:this.onChangePasswordConformation}),r.a.createElement(J.a,{type:"primary",className:"signUpBtn",onClick:this.submit}," \u6ce8\u518c"),r.a.createElement("p",null,"\u5982\u679c\u5df2\u6709\u8d26\u53f7\uff0c\u8bf7\u7acb\u5373",r.a.createElement(H.a,{to:"/login"},"\u767b\u5f55")))}}]),t}(r.a.Component)),$=Object(m.f)(Z),F=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(m.b,{history:y},r.a.createElement("div",null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(q,null)),r.a.createElement(m.a,{path:"/login"},r.a.createElement(Y,null)),r.a.createElement(m.a,{path:"/signUp"},r.a.createElement($,null)))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(53),V=n(95),X=Object(G.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[].concat(Object(V.a)(e),[t.payload]);case"INIT_TODOS":return Object(V.a)(t.payload);case"UPDATE_TODO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"EDIT_TODO":return e.map((function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})}));default:return e}}}),ee=Object(G.c)(X);c.a.render(r.a.createElement(s.a,{store:ee},r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.b68aa23d.chunk.js.map